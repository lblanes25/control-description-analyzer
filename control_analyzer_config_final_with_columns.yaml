# Enhanced configuration file for Control Description Analyzer

# NLP Configuration
spacy:
  preferred_model: en_core_web_md
  fallback_model: en_core_web_sm

# Scoring Configuration
category_thresholds:
  excellent: 75
  good: 50

# WHO Detection Constants
who_detection:
  # Scoring thresholds
  scores:
    explicit_frequency: 0.9
    adhoc_frequency: 0.7
    period_end_pattern: 0.85
    close_period_pattern: 0.85
    timeline_pattern: 0.80
    business_cycle_pattern: 0.75
    event_trigger_pattern: 0.75
    implicit_temporal_modifier: 0.6

  # Vague term suggestions
  vague_term_suggestions:
    periodically: "specific frequency (daily, weekly, monthly)"
    regularly: "specific frequency (daily, weekly, monthly)"
    as needed: "triggering conditions (e.g., 'when discrepancies are found')"
    when necessary: "specific conditions that necessitate the control"
    as appropriate: "specific criteria for appropriateness"
    as required: "specific requirements that trigger the control"
    on a regular basis: "specific frequency (daily, weekly, monthly)"
    timely: "specific timeframe (e.g., 'within 3 business days')"
    promptly: "specific timeframe (e.g., 'within 24 hours')"
    from time to time: "specific frequency or conditions"
    when appropriate: "specific criteria for when the control is appropriate"
    where appropriate: "specific criteria for where the control is appropriate"
    if needed: "specific conditions that trigger the control"
    if necessary: "specific conditions that trigger the control"
    occasionally: "specific frequency (monthly, quarterly)"
    sometimes: "specific frequency or triggering conditions"
    at times: "specific timing or frequency"
    now and then: "specific frequency"
    intermittently: "specific schedule or pattern"
    at intervals: "specific interval period (e.g., 'every 14 days')"
    frequently: "specific frequency (daily, twice weekly)"
    infrequently: "specific frequency (quarterly, annually)"
    as applicable: "specific criteria for applicability"
    as deemed necessary: "specific criteria for necessity"
    may vary: "specific frequency with defined parameters"
    may change: "specific frequency with defined parameters"
    may differ: "specific frequency with defined parameters"
    may: "specific frequency (daily, weekly, monthly)"
    ad-hoc: "specific triggering conditions for the ad-hoc review"
    ad hoc: "specific triggering conditions for the ad-hoc review"
    adhoc: "specific triggering conditions for the ad-hoc review"
    on an ad-hoc basis: "specific triggering conditions for the ad-hoc review"
    on demand: "specific triggering conditions"
    as and when: "specific triggering conditions"
    upon request: "defined request process with frequency"
    when requested: "defined request process with frequency"
    non-scheduled: "regular schedule (daily, weekly, monthly)"

# Element Definitions
elements:
  WHO:
    weight: 32
    keywords:
      # Roles and positions
      - manager
      - director
      - supervisor
      - analyst
      - specialist
      - officer
      - coordinator
      - lead
      - team lead
      - department head
      - staff
      - committee
      - board
      - executive
      - administrator
      - chief
      - president
      - vp
      - vice president
      - controller
      - accountant
      - auditor
      - reviewer
      - approver
      - owner
      - preparer
      - personnel
      - individual
      - employee
      - representative
      - agent
      - person
      - party
      - resource
      - cfo
      - finance director
      - financial controller
      - corporate controller
      - fund accountant
      - general ledger accountant
      - senior accountant
      - junior accountant
      - staff accountant
      - accounts payable
      - accounts receivable
      - revenue accountant
      - fixed asset accountant
      - cost accountant
      - tax accountant
      - payroll specialist
      - billing specialist
      - treasury analyst
      - cash manager
      - financial analyst
      - financial planning analyst
      - budget analyst
      - forecasting specialist
      - financial reporting manager
      - accounting manager
      - accounting supervisor
      - bookkeeper
      - credit analyst
      - accounts supervisor
      - cae
      - audit director
      - internal audit manager
      - senior internal auditor
      - internal auditor
      - it auditor
      - compliance officer
      - chief compliance officer
      - compliance manager
      - compliance analyst
      - regulatory compliance
      - sox compliance
      - controls specialist
      - control tester
      - risk analyst
      - risk manager
      - control owner
      - process owner
      - treasurer
      - assistant treasurer
      - treasury manager
      - treasury analyst
      - investment manager
      - investment analyst
      - portfolio manager
      - cash management specialist
      - cio
      - cto
      - it director
      - it manager
      - system administrator
      - network administrator
      - database administrator
      - application owner
      - application administrator
      - security administrator
      - systems analyst
      - it security
      - it support
      - it governance
      - data steward
      - data custodian
      - data owner
      - coo
      - operations director
      - operations manager
      - business unit head
      - division leader
      - business manager
      - product manager
      - program manager
      - project manager
      - process manager
      - line manager
      - shift supervisor
      - team leader
      - functional manager
      - unit head
      - department supervisor
      - ceo
      - management

      # Committees and teams
      - board of directors
      - audit committee
      - risk committee
      - governance committee
      - executive committee
      - management committee
      - steering committee
      - leadership team
      - senior leadership
      - executive management
      - c-suite
      - senior management
      - finance team
      - accounting department
      - treasury department
      - audit group
      - internal audit team
      - external auditors
      - compliance team
      - risk management team
      - it department
      - security team
      - operations team
      - business unit
      - management team
      - executive team
      - control team
      - process team
      - project team
      - governance team
      - reporting team
      - financial operations
      - accounting operations
      - back office
      - front office
      - middle office
      - shared services
      - group
      - unit
      - division
      - function
      - office
      - organization
      - entity
      - branch

      # Systems and automation
      - application
      - system
      - software
      - platform
      - program
      - tool
      - utility
      - database
      - server
      - network
      - interface
      - portal
      - dashboard
      - module
      - service
      - bot
      - workflow
      - algorithm
      - erp
      - sap
      - oracle
      - peoplesoft
      - servicenow
      - sharepoint
      - crm
      - grc system
      - financial system
      - accounting system
      - reporting system
      - monitoring system
      - control system
      - ticketing system
      - workflow system
      - automatically
      - automatic
      - automated
      - programmed
      - scheduled
      - scripted
      - configured
      - batched
      - robotic
      - systematic
      - rules-based
      - recurring
      - job
      - routine
      - process
      - system-generated
      - system performs
      - automated control
      - system restricts
      - system enforces
      - generates
      - calculates
      - computes
      - processes
      - validates
      - restricts
      - limits
      - prevents
      - blocks
    append: false

  WHEN:
    weight: 22
    keywords:
      # Frequencies
      - daily
      - weekly
      - biweekly
      - monthly
      - quarterly
      - annually
      - yearly
      - semi-annually
      - biannually
      - periodically
      - semi-monthly
      - bi-monthly
      - bi-annual
      - hourly
      - intraday

      # Specific timing
      - every
      - each
      - after
      - before
      - prior to
      - following
      - upon
      - when
      - whenever
      - as soon as
      - immediately
      - once
      - twice
      - frequency
      - schedule
      - upon
      - during
      - deadline
      - due date
      - time frame
      - period
      - day
      - week
      - month
      - year

      # Months and quarters
      - january
      - february
      - march
      - april
      - may
      - june
      - july
      - august
      - september
      - october
      - november
      - december
      - q1
      - q2
      - q3
      - q4

      # Time periods
      - month end
      - quarter end
      - year end
      - period end
      - fiscal
      - calendar
      - date
      - schedule
      - interval
      - regular
      - periodic
      - scheduled
      - ongoing
      - continuous
      - real-time
      - triggered
      - event-driven
      - times
      - hours
      - minutes
      - immediately
      - upon receipt
      - end of
      - beginning of
      - start of
      - close of
      - completion of
      - cycle
      - interval

      # Time sequence
      - first
      - second
      - third
      - fourth
      - subsequent
      - next
      - previous
      - initial
      - final
      - prior
      - post
      - mid

      # Time of day
      - morning
      - afternoon
      - evening
      - weekend
      - business day
      - workday
      - timeframe

      # Other timing patterns
      - recurring
      - ad hoc
      - as needed
      - per
      - routinely
      - intermittent
      - on-demand
      - rolling
      - cadence
      - seasonal
      - interim

      # Time-based triggers
      - triggered
      - event
      - occurrence
      - instance
      - transaction
      - processing
      - closing
      - reconciliation
      - review cycle
    append: false

    # Enhanced timing detection configurations
    temporal_indicators:
      - moment
      - period
      - interval
      - date
      - cycle
      - phase
      - stage

    context_exclusions:
      following:
        - lines
        - business
        - areas
        - items
        - steps
        - fields
        - sections
      time:
        - real-time
        - one time
        - first time
        - last time
      period:
        - reporting period
        - accounting period
        - time period

    vague_patterns:
      - "^exceptions are (?:addressed|resolved|reviewed|handled) (when|as|if) (needed|appropriate|required)"
      - "^(as|when|if) (appropriate|needed|required)"
      - "^on an (as needed|when needed|if needed) basis"
      - "performed (periodically|occasionally|regularly|as necessary)"

    complex_patterns:
      # Basic timeframe patterns
      - ["after\\s+([\\w\\s]+?)\\s+(is|are|has been|have been)", "sequential", 0.85]
      - ["prior\\s+to\\s+([\\w\\s]+)", "precondition", 0.85]
      - ["following\\s+(completion|finalization|approval|review)\\s+of", "sequential", 0.85]
      - ["upon\\s+([\\w\\s]+)", "trigger", 0.85]
      - ["by\\s+the\\s+(\\d+)(?:st|nd|rd|th)\\s+(day|week|month)", "deadline", 0.95]

      # Financial cycle patterns
      - ["before\\s+(?:each|every)\\s+(?:financial|month[- ]end|quarter[- ]end|year[- ]end)\\s+close", "financial_cycle", 0.95]
      - ["after\\s+(?:each|every|the)\\s+(?:financial|month[- ]end|quarter[- ]end|year[- ]end)\\s+close", "financial_cycle", 0.95]
      - ["during\\s+(?:the|each|every)\\s+(?:financial|month[- ]end|quarter[- ]end|year[- ]end)\\s+close", "financial_cycle", 0.95]
      - ["at\\s+(?:the|each|every)\\s+(?:financial|month[- ]end|quarter[- ]end|year[- ]end)\\s+close", "financial_cycle", 0.95]

      # Day of week/month patterns
      - ["(?i)every\\s+(?:monday|tuesday|wednesday|thursday|friday|saturday|sunday)", "weekly_schedule", 0.95]
      - ["(?i)each\\s+(?:monday|tuesday|wednesday|thursday|friday|saturday|sunday)", "weekly_schedule", 0.95]
      - ["(?i)on\\s+(?:monday|tuesday|wednesday|thursday|friday|saturday|sunday)s?", "weekly_schedule", 0.95]

      # Day of month patterns
      - ["(?:on|by)\\s+(?:the\\s+)?(\\d+)(?:st|nd|rd|th)(?:\\s+day)?(?:\\s+of\\s+(?:each|every|the)\\s+month)?", "day_of_month", 0.95]

    event_patterns:
      # Business cycle patterns
      - ["(?:during|after|before|at)\\s+(?:the|each|every)\\s+(?:audit|review|assessment|reporting)\\s+(?:cycle|period|process)", "business_cycle", 0.8]
      - ["(?:upon|after|following)\\s+(?:completion|finalization)\\s+of\\s+(?:the|each|every)\\s+(?:audit|review|assessment|reporting)", "business_cycle", 0.8]

      # Event-based triggers
      - ["(?:upon|after|when|following)\\s+(?:receipt|notification|identification|detection)\\s+of", "event_trigger", 0.9]
      - ["(?:immediately|promptly)\\s+(?:upon|after|following)\\s+(?:detection|identification|discovery)", "event_trigger", 0.9]

      # Exception handling
      - ["when\\s+(?:exceptions|anomalies|discrepancies|errors)\\s+(?:are|have been)\\s+(?:identified|detected|found)", "exception_handling", 0.9]
      - ["if\\s+(?:exceptions|anomalies|discrepancies|errors)\\s+(?:are|have been)\\s+(?:identified|detected|found)", "exception_handling", 0.9]

    vague_timing_terms:
      - periodically
      - regularly
      - as needed
      - when necessary
      - as appropriate
      - as required
      - on a regular basis
      - timely
      - promptly
      - from time to time
      - when appropriate
      - where appropriate
      - if needed
      - if necessary
      - occasionally
      - sometimes
      - at times
      - now and then
      - intermittently
      - at intervals
      - frequently
      - infrequently
      - as applicable
      - as deemed necessary
      - when needed
      - if appropriate
      - where necessary
      - as necessary

    procedure_patterns:
      - "defined in (procedure|policy|document|standard)"
      - "outlined in (procedure|policy|document|standard)"
      - "described in (procedure|policy|document|standard)"
      - "according to (procedure|policy|document|standard)"
      - "per (procedure|policy|document|standard)"
      - "as per (procedure|policy|document|standard)"
      - "based on (procedure|policy|document|standard)"
      - "in accordance with (procedure|policy|document|standard)"

  WHAT:
    weight: 32
    keywords:
      # Action verbs
      - review
      - verify
      - check
      - validate
      - ensure
      - confirm
      - examine
      - analyze
      - evaluate
      - assess
      - monitor
      - track
      - compare
      - reconcile
      - match
      - approve
      - authorize
      - sign
      - document
      - record
      - log
      - maintain
      - update
      - generate
      - prepare
      - create
      - establish
      - implement
      - execute
      - perform

      # Compound activities
      - conduct review
      - perform check
      - carry out
      - run report
      - generate report
      - prepare documentation
      - maintain record
      - ensure compliance
      - verify accuracy
      - validate completeness
      - cross-check
      - double-check
      - sign off
      - follow up
      - identify discrepancies
      - resolve issues
      - address exceptions
      - match transactions
      - approve documents
      - authorize access
    append: false

    # Verb strength categories moved from code
    high_strength_verbs:
      approve: 1.0
      authorize: 1.0
      reconcile: 1.0
      validate: 1.0
      certify: 1.0
      verify: 1.0
      confirm: 0.9
      test: 0.9
      enforce: 0.9
      authenticate: 0.9
      audit: 0.9
      inspect: 0.9
      review: 0.85
      check: 0.85
      notify: 0.85
      route: 0.85

    medium_strength_verbs:
      examine: 0.7
      analyze: 0.7
      evaluate: 0.7
      assess: 0.7
      track: 0.7
      document: 0.7
      record: 0.7
      maintain: 0.6
      prepare: 0.6
      generate: 0.6
      update: 0.6
      calculate: 0.6
      process: 0.6
      monitor: 0.65
      revoke: 0.7
      disable: 0.7
      remove: 0.7
      limit: 0.7
      restrict: 0.7
      resolve: 0.7

    low_strength_verbs:
      look: 0.2
      observe: 0.3
      view: 0.2
      consider: 0.2
      watch: 0.2
      note: 0.3
      see: 0.1
      handle: 0.2
      manage: 0.3
      coordinate: 0.3
      oversee: 0.4
      perform: 0.3

    problematic_verbs:
      use: 0.1
      launch: 0.1
      set: 0.1
      meet: 0.1
      include: 0.1
      have: 0.1
      be: 0.1
      exist: 0.1
      contain: 0.1
      store: 0.2

    # Confidence calculation multipliers moved from code
    confidence_multipliers:
      future_tense_boost: 1.15
      high_strength_passive_penalty: 0.9
      problematic_passive_penalty: 0.3
      standard_passive_penalty: 0.7
      subject_boost: 1.1
      object_specificity_boost: 0.2
      where_component_boost: 1.1
      root_verb_boost: 1.2
      position_factor_reduction: 0.1

    # Confidence threshold for candidate filtering
    confidence_threshold: 0.4

    # Strong action threshold for primary detection
    strong_action_threshold: 0.7

    # Control patterns for pattern-based extraction
    control_patterns:
      - pattern: '(will\s+)?(obtain|collect|gather|receive)\s+([a-z\s]+)'
        confidence: 0.8
      - pattern: '(notify|alert|inform)\s+([a-z\s]+)'
        confidence: 0.75
      - pattern: '(validate|verify|confirm)\s+that\s+([a-z\s]+)'
        confidence: 0.8
      - pattern: '(age|categorize|classify)\s+([a-z\s]+)'
        confidence: 0.7
      - pattern: '(limit|restrict)\s+([a-z\s]+)\s+to\s+([a-z\s]+)'
        confidence: 0.75
      - pattern: '(route|escalate|forward)\s+([a-z\s]+)\s+to\s+([a-z\s]+)'
        confidence: 0.75

    # Control activity nouns for noun chunk fallback
    control_nouns:
      review: 0.8
      approval: 0.8
      validation: 0.8
      verification: 0.8
      reconciliation: 0.8
      assessment: 0.7
      monitoring: 0.7
      inspection: 0.7
      audit: 0.8
      analysis: 0.7
      testing: 0.7

    # Verb mapping for noun chunks
    verb_mapping:
      review: "review"
      approval: "approve"
      validation: "validate"
      verification: "verify"
      reconciliation: "reconcile"
      assessment: "assess"
      monitoring: "monitor"
      inspection: "inspect"
      audit: "audit"
      analysis: "analyze"
      testing: "test"

    # Timing exclusions for phrase cleaning
    timing_exclusions:
      - annually
      - monthly
      - quarterly
      - weekly
      - daily
      - periodically
      - regularly
      - basis
      - ad
      - hoc

    # Purpose clause starters to exclude
    purpose_clause_starters:
      - "to ensure"
      - "to manage"
      - "to maintain"
      - "to provide"
      - "to comply"
      - "to achieve"
      - "to support"
      - "to enable"
      - "to prevent"
      - "to detect"

    # Future tense auxiliaries
    future_auxiliaries:
      - will
      - shall
      - can
      - may
      - must
      - should

    # Passive control verbs
    passive_control_verbs:
      - reviewed
      - approved
      - verified
      - reconciled
      - tested
      - validated
      - examined
      - analyzed

    # Control type validation settings
    control_type_indicators:
      preventive:
        - prevent
        - block
        - restrict
        - limit
        - prohibit
        - stop
        - validate before
        - approve before
        - check before
        - authorize
        - authenticate
        - gate
        - control access
        - deny
        - reject
        - screen
        - filter
        - segregate
        - separate
      detective:
        - detect
        - identify
        - discover
        - find
        - review
        - monitor
        - check
        - validate
        - verify
        - reconcile
        - compare
        - inspect
        - examine
        - audit
        - analyze
        - assess
        - observe
        - scan
        - look for
        - test
      corrective:
        - correct
        - remediate
        - fix
        - resolve
        - address
        - adjust
        - update
        - change
        - modify
        - repair
        - rectify
        - restore
        - mitigate
        - handle
        - process
        - respond
        - revise

    # Enhanced verb alternatives with control type context
    verb_alternatives:
      perform:
        preventive: "'prevent', 'block', or 'restrict'"
        detective: "'detect', 'identify', or 'monitor'"
        corrective: "'correct', 'remediate', or 'fix'"
      do:
        preventive: "'restrict', 'limit', or 'authorize'"
        detective: "'verify', 'check', or 'compare'"
        corrective: "'resolve', 'fix', or 'update'"
      handle:
        preventive: "'approve', 'authorize', or 'validate'"
        detective: "'review', 'examine', or 'analyze'"
        corrective: "'fix', 'correct', or 'resolve'"
      manage:
        preventive: "'control', 'limit', or 'authorize'"
        detective: "'monitor', 'oversee', or 'review'"
        corrective: "'remediate', 'correct', or 'adjust'"
      address:
        preventive: "'prevent', 'block', or 'control'"
        detective: "'identify', 'discover', or 'detect'"
        corrective: "'resolve', 'remediate', or 'correct'"

    # Technical terms for object specificity
    technical_terms:
      - system
      - application
      - database
      - server
      - protocol
      - interface
      - module
      - component
      - api
      - configuration
      - parameter
      - threshold
      - workflow
      - rule set
      - algorithm
      - transaction
      - record
      - document
      - account
      - entity
      - report
      - dashboard

    # Vague object terms to penalize
    vague_object_terms:
      - item
      - thing
      - stuff
      - issue
      - matter
      - situation
      - exception
      - information
      - data
      - content
      - material
      - object
      - appropriate
      - proper
      - necessary
      - adequate

    # Where detection components
    where_systems:
      - system
      - application
      - database
      - server
      - platform
      - sharepoint
      - erp
      - sap
      - oracle
      - repository
      - file
      - folder
      - directory
      - dashboard
      - module
      - portal
      - service
      - cloud

    where_locations:
      - site
      - location
      - storage
      - share
      - repository
      - archive
      - folder
      - directory
      - office
      - facility
      - warehouse
      - department

    # Enable debug mode for detailed scoring traces
    debug_mode: false

  WHY:
    weight: 11
    keywords:
      # Purpose indicators
      - to ensure
      - in order to
      - for the purpose of
      - designed to
      - intended to
      - so that
      - purpose
      - objective
      - goal

      # Risk-related terms
      - prevent
      - detect
      - mitigate
      - risk
      - error
      - fraud
      - misstatement
      - compliance
      - regulatory
      - requirement
      - policy
      - procedure
      - standard
      - guideline
      - regulation
      - law
      - mandate
      - obligation
      - safeguard
      - protect

      # Benefit terms
      - accuracy
      - completeness
      - validity
      - integrity
      - reliability
      - consistency
      - efficiency
      - effectiveness
      - quality
      - improvement
      - enhancement
      - optimization
      - assurance
    append: false

    # Enhanced WHY configuration sections
    purpose_patterns:
      - 'to\s+(ensure|verify|confirm|validate|prevent|detect|mitigate|comply|adhere|demonstrate|maintain|support|achieve|provide)\s+([^\.;,]{5,50})'
      - 'in\s+order\s+to\s+([^\.;,]{5,50})'
      - 'for\s+the\s+purpose\s+of\s+([^\.;,]{5,50})'
      - 'designed\s+to\s+([^\.;,]{5,50})'
      - 'intended\s+to\s+([^\.;,]{5,50})'
      - 'so\s+that\s+([^\.;,]{5,50})'
      - 'the\s+purpose\s+(?:of\s+this\s+control\s+is|is)\s+to\s+([^\.;,]{5,50})'
      - 'this\s+control\s+(?:is\s+designed|exists)\s+to\s+([^\.;,]{5,50})'

    vague_terms:
      - "proper functioning"
      - "appropriate"
      - "adequately"
      - "properly"
      - "as needed"
      - "as required"
      - "as appropriate"
      - "correct functioning"
      - "effective"
      - "efficient"
      - "functioning"
      - "operational"
      - "successful"
      - "appropriate action"
      - "necessary action"
      - "properly functioning"

    intent_verbs:
      preventive:
        - prevent
        - avoid
        - stop
        - block
        - prohibit
        - restrict
        - limit
      detective:
        - detect
        - identify
        - discover
        - find
        - monitor
        - review
        - reconcile
      corrective:
        - correct
        - resolve
        - address
        - fix
        - remediate
        - rectify
      compliance:
        - comply
        - adhere
        - conform
        - follow
        - meet
        - satisfy
        - fulfill

    mitigation_verbs:
      - resolve
      - correct
      - address
      - remediate
      - fix
      - prevent
      - block
      - stop
      - deny
      - restrict
      - escalate
      - alert
      - notify
      - disable
      - lockout
      - report

    verb_purpose_mapping:
      review:
        default: "to ensure accuracy and completeness"
        approval: "to ensure proper authorization"
        changes: "to prevent unauthorized changes"
        access: "to ensure appropriate access"
      approve:
        default: "to ensure proper authorization"
        changes: "to prevent unauthorized changes"
        transactions: "to ensure authorized transactions"
        documents: "to ensure document validity"
      reconcile:
        default: "to ensure data integrity and accuracy"
      verify:
        default: "to confirm accuracy and validity"
        approval: "to ensure proper authorization"
      validate:
        default: "to ensure compliance and accuracy"
        approval: "to validate authorization"
      monitor:
        default: "to detect anomalies or non-compliance"
        changes: "to identify unauthorized changes"
      check:
        default: "to identify errors or inconsistencies"
        approval: "to verify authorization"

    categories:
      risk_mitigation:
        - risk
        - prevent
        - mitigate
        - reduce
        - avoid
        - minimize
      compliance:
        - comply
        - compliance
        - regulatory
        - regulation
        - requirement
        - policy
        - standard
      accuracy:
        - accuracy
        - accurate
        - correct
        - error-free
        - integrity
        - reliable
      completeness:
        - complete
        - completeness
        - all
        - comprehensive
      authorization:
        - authorize
        - approval
        - permission
        - authorization

    # Risk alignment settings
    alignment_thresholds:
      strong: 0.7
      moderate: 0.4
      weak: 0.1

    # Flag to enable diagnostic output
    debug_mode: false

  ESCALATION:
    weight: 3
    keywords:
      # Escalation terms
      - escalate
      - escalation
      - escalated to
      - reported to
      - elevated to
      - notify
      - notification
      - alert
      - inform
      - communicate
      - report
      - elevated
      - elevation
      - raised
      - raising
      - communicate
      - communication
      - reported
      - reporting
      - highlight
      - highlighted
      - inform
      - informed
      - contact
      - contacted
      - route
      - routed
      - forward
      - forwarded
      - submitted
      - submission

      # Issue handling
      - exception
      - exceptions
      - failure
      - failures
      - issue
      - issues
      - resolution
      - remediate
      - remediation
      - handle
      - handling
      - address
      - resolve
      - resolution
      - respond
      - response
      - breach
      - violation
      - discrepancy
      - unauthorized
      - inappropriate
      - incomplete
      - error
      - problem
      - concern
      - risk
      - incident
      - trigger
      - flag
      - flagged
      - immediate
      - urgent
      - priority
      - corrective
      - correction
      - fix
      - follow-up
      - follow up
      - revoke
      - disable
      - addressed
      - addressing
      - managed
      - managing
      - coordinated
      - coordination
      - documented
      - documentation
      - tracked
      - tracking
      - updated
      - updating
      - monitored
      - monitoring
      - warning
      - action
      - deviation
      - anomaly
      - finding

      # Conditional phrases
      - if necessary
      - as necessary
      - if needed
      - if required
      - when needed
      - if identified
      - when identified

      # Escalation targets
      - management
      - supervisor
      - manager
      - senior
      - executive
      - leadership
      - committee
      - board
      - higher level
      - appropriate
      - cfo
      - director
      - manager
      - supervisor
      - head
      - chief
      - executive
    append: false

# Vague Terms
vague_terms:
  # Ambiguous terms
  - appropriate
  - timely
  - periodically
  - regularly
  - as needed
  - when necessary
  - if required
  - as applicable
  - as appropriate
  - may
  - might
  - could
  - should
  - would
  - possibly
  - potentially

  # Undefined references
  - etc
  - and so on
  - and so forth
  - among others
  - various
  - several
  - numerous
  - many
  - few
  - some
  - certain

  # Non-specific quantities
  - adequate
  - sufficient
  - enough
  - substantial
  - reasonable
  - considerable
  - significant
  - insignificant
  - minimal
  - maximal

  # Unclear actions
  - handle
  - manage
  - deal with
  - address
  - take care of
  - process
  - facilitate
  - coordinate
  - arrange
  - oversee
append_vague_terms: true

# Control Type Keywords
control_type_keywords:
  automated:
    - system
    - automated
    - automatic
    - software
    - program
    - script
    - job
    - batch
    - workflow
    - algorithm
    - systematic
  preventive:
    - prevent
    - preventive
    - preventative
    - avoid
    - before
    - prior to
    - stops
    - blocks
    - prohibits
    - denies
    - restricts
  detective:
    - detect
    - detective
    - identify
    - discover
    - find
    - after
    - following
    - review
    - monitor
    - reconcile
    - identifies
    - discovers
  corrective:
    - correct
    - corrective
    - remediate
    - fix
    - resolve
    - address
    - adjust
    - fixes
    - resolves
    - corrects
    - addresses
append_control_type_keywords: true

# Frequency Terms
frequency_terms:
  daily:
    - daily
    - each day
    - every day
    - on a daily basis
    - day
    - daily basis
  weekly:
    - weekly
    - each week
    - every week
    - on a weekly basis
    - week
    - weekly basis
    # Explicit weekday examples for matching
    - every Monday
    - every Tuesday
    - every Wednesday
    - every Thursday
    - every Friday
  biweekly:
    - biweekly
    - twice a week
    - every two weeks
    - fortnightly
  monthly:
    - monthly
    - each month
    - every month
    - on a monthly basis
    - month
    - monthly basis
  quarterly:
    - quarterly
    - each quarter
    - every quarter
    - on a quarterly basis
    - quarter
    - once per quarter
    - each fiscal quarter
    - every three months
  annually:
    - annually
    - yearly
    - each year
    - every year
    - annual
    - on an annual basis
    - year
append_frequency_terms: true

# Domain Clusters
domain_clusters:
  review:
    - review
    - examine
    - inspect
    - assess
    - evaluate
    - analyze
    - check
    - scrutinize
    - study
    - look over
  approve:
    - approve
    - authorize
    - sign off
    - sanction
    - endorse
    - validate
    - confirm
    - certify
    - ratify
    - permit
  monthly:
    - monthly
    - every month
    - each month
    - once a month
    - on a monthly basis
    - month-end
    - monthly cycle

# Multi-control detection configuration
multi_control:
  # Escalation markers that indicate conditional paths rather than separate controls
  escalation_markers:
    - "if "
    - "when "
    - "exception"
    - "discrepan"
    - "error"
    - "issue"
    - "escalate"
    - "notify"
    - "alert"
    - "report to"
    - "exceed"
    - "threshold"
    - "not match"
    - "fails"
    - "failure"
    - "variance"

  # Ad-hoc timing indicators
  adhoc_terms:
    - "ad hoc"
    - "adhoc"
    - "as needed"
    - "when needed"
    - "if needed"
    - "on-demand"
    - "on demand"
    - "as required"
    - "when necessary"

  # Sequence markers that might indicate multiple steps
  sequence_markers:
    - "then"
    - "after"
    - "subsequently"
    - "next"
    - "following"
    - "afterward"
    - "first"
    - "second"
    - "third"
    - "finally"
    - "lastly"

  # Score penalties for multi-control descriptions
  points_per_control: 5
  max_penalty: 10

# Column Mapping
columns:
  id: Control ID
  description: Control Description
  frequency: Control Frequency
  type: Control Type
  automation: Control Automation Level
  risk: Key Risk Description
  audit_leader: Audit Leader From AE
  audit_entity: Audit Entity

  portfolio_metadata:
    audits:
      "AUDIT-2023-001":
        name: "Finance Department Audit 2023"
        leader: "Jane Smith"
      "AUDIT-2023-002":
        name: "IT Department Audit 2023"
        leader: "John Doe" Confidence scoring constants
  confidence_scoring:
    base_confidence_score: 0.7
    human_type_boost: 0.2
    managerial_role_boost: 0.2
    specific_finance_role_boost: 0.3
    team_boost: 0.1
    committee_boost: 0.15
    acronym_team_boost: 0.2
    system_type_boost: 0.1
    non_performer_penalty: 0.1
    passive_voice_penalty: 0.1
    main_subject_boost: 1.2
    by_phrase_boost: 1.3
    responsibility_boost: 1.3
    temporal_boost: 1.2
    fallback_penalty: 0.7
    regex_fallback_penalty: 0.6
    automated_control_boost: 0.2
    manual_control_boost: 0.2
    executive_frequency_penalty: 0.1
    continuous_system_boost: 0.1
    minimum_confidence: 0.1
    maximum_confidence: 1.0
    minimum_fallback_confidence: 0.3

  # Control verbs for WHO detection
  control_verbs:
    - review
    - approve
    - verify
    - check
    - validate
    - reconcile
    - examine
    - analyze
    - evaluate
    - assess
    - monitor
    - track
    - investigate
    - inspect
    - audit
    - oversee
    - supervise
    - ensure
    - perform
    - execute
    - conduct
    - disable
    - enforce
    - generate
    - address
    - compare
    - maintain
    - identify
    - correct
    - update
    - submit
    - complete
    - prepare
    - provide
    - confirm

  # Human role indicators
  human_indicators:
    # Roles and titles
    - manager
    - director
    - supervisor
    - analyst
    - specialist
    - officer
    - coordinator
    - lead
    - team
    - staff
    - personnel
    - employee
    - individual
    - person
    - accountant
    - controller
    - auditor
    - administrator
    - executive
    - chief
    - head
    - president
    - ceo
    - cfo
    - cio
    - vp
    - vice president
    - secretary
    - treasurer
    - owner
    - preparer
    - reviewer
    # Departments and groups
    - finance
    - accounting
    - accounts receivable
    - accounts payable
    - treasury
    - financial reporting
    - tax
    - payroll
    - billing
    - credit
    - collections
    - committee
    - department
    - group
    - unit
    - division
    - office
    - board
    # Specific roles
    - financial controller
    - financial analyst
    - budget analyst
    - compliance
    - audit
    - risk
    - governance
    - oversight
    - management
    - leadership

  # System indicators
  system_indicators:
    - system
    - application
    - software
    - platform
    - database
    - server
    - program
    - script
    - job
    - batch
    - workflow
    - algorithm
    - automated
    - automatic
    - tool
    - module
    - interface
    - api
    - service
    - function
    - scheduled
    - timer
    - daemon
    - bot
    - routine
    - task

  # Non-performer indicators
  non_performer_indicators:
    - limit
    - threshold
    - policy
    - procedure
    - standard
    - regulation
    - account
    - transaction
    - balance
    - report
    - document
    - record
    - exception
    - error
    - issue
    - finding
    - discrepancy
    - review
    - control
    - entry
    - activity
    - access
    - instance
    - item
    - questionnaire
    - form
    - template
    - results
    - assessment
    - risk
    - compliance
    - process
    - monitoring
    - levels
    - ensure

  # Temporal prefixes for pattern detection
  temporal_prefixes:
    - annually
    - monthly
    - quarterly
    - weekly
    - daily
    - periodically
    - regularly

  # Problem patterns for validation
  problem_patterns:
    - '\brisk\b'
    - '\baccess levels\b'
    - '\bensure compliance\b'
    - '\bmonitor\b'
    - '\blimit\b'
    - '\bprocess\b'
    - '\bcontrol\b'
    - '\bcompliance\b'
    - '\baccess\b'
    - '\blevels\b'
    - '\bensure\b'

  # Non-performer terms for subject filtering
  non_performer_terms:
    - exception
    - error
    - transaction
    - record
    - issue
    - item
    - reconciliation
    - document
    - report
    - questionnaire
    - form
    - template
    - results
    - risk
    - compliance
    - access
    - levels
    - limit
    - process
    - customer
    - data

# Penalty Configuration
vague_term_penalty: 2
max_vague_penalty: 10
penalties:
  multi_control:
    points_per_control: 5
    max_penalty: 10
  timing:
    vague_term_score: 0.1
    secondary_vague_penalty_per_term: 0.1
    max_secondary_vague_penalty: 0.3
    detective_control_penalty: 0.8
    preventive_control_boost: 1.2

# Enable/disable enhanced detection
use_enhanced_detection: true

# Timing Detection Configuration
timing_detection:
  # Regex patterns for frequency detection
  patterns:
    daily: '\b(daily|each\s+day|every\s+day|on\s+a\s+daily\s+basis|day\b|daily\s+basis)\b'
    weekly: '\b(weekly|each\s+week|every\s+week|on\s+a\s+weekly\s+basis|week\b|weekly\s+basis)\b'
    monthly: '\b(monthly|each\s+month|every\s+month|on\s+a\s+monthly\s+basis|month\b|monthly\s+basis)\b'
    quarterly: '\b(quarterly|each\s+quarter|every\s+quarter|on\s+a\s+quarterly\s+basis|quarter\b|once\s+per\s+quarter|each\s+fiscal\s+quarter|every\s+three\s+months)\b'
    annually: '\b(annually|yearly|each\s+year|every\s+year|annual\b|on\s+an\s+annual\s+basis|year\b)\b'
    adhoc: '\b(adhoc|ad[\s-]hoc|on\s+an\s+ad[\s-]hoc\s+basis)\b'
    weekday: '\b(every|each|on)\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday)s?\b'
    period_end: '\b(at|during|before|after)\s+(the\s+)?(fiscal|calendar)?\s*(year|quarter|month)[\s-]end(\s+close)?\b'
    close_period: '\b(at|during)\s+(each|every|the)\s+closing\s+(cycle|period|process)\b'
    timeline: '\b(after|before|prior\s+to|following|upon)\s+'
    vague_terms: '\b(as\s+needed|when\s+needed|if\s+needed|as\s+appropriate|when\s+appropriate|if\s+appropriate|as\s+required|when\s+required|if\s+required|periodically|occasionally|from\s+time\s+to\s+time|regularly|may\s+vary|may\s+change|may\s+differ|may\s+be|may\s+not|on\s+demand|as\s+and\s+when|upon\s+request|when\s+requested|non[\s-]scheduled)\b'
    problematic_may: '\b(may\s+(?:vary|differ|change|be|not|need)\b'
    business_cycle: '\b(during|after|before|at|upon|following|as\s+part\s+of)\s+(the\s+)?(each|every)?\s*(audit|review|assessment|reporting|close|closing)\s+(cycle|period|process)\b'
    procedure_reference: '\b(defined|outlined|described|according|per|as\s+per|based|in\s+accordance)\s+(in|on|with|to)\s+(procedure|policy|document|standard)\b'
    event_trigger: '\b(upon|after|when|following|immediately|promptly)\s+(receipt|notification|identification|detection|discovery|system|application|platform|database)\b'

  #